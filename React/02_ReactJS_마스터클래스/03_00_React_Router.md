# React Router V6

## Introduction

[üîó react-router-dom](https://www.npmjs.com/package/react-router-dom?activeTab=versions)

> classic version
```npm
npm i react-router-dom@5.3.4
```

‚ùóÔ∏èÎßåÏïΩ ÌÉÄÏûÖÏä§ÌÅ¨Î¶ΩÌä∏ Î≤ÑÏ†Ñ Ìò∏ÌôòÏù¥ ÏïàÎêòÏñ¥ÏÑú ÏóêÎü¨Í∞Ä ÎÇòÎ©¥ ÏïÑÎûò Î™ÖÎ†πÎ¨∏ Î®ºÏ†Ä Ïã§ÌñâÌïòÍ∏∞

```npm
npm install typescript@4.8.3 
```

## BrowserRouter

> react-router-dom 6.4 install

```npm
npm i react-router-dom@6.4
```

> Header.tsx

```typescript
import { Link } from 'react-router-dom';

function Header(){
    return (
        <header>
            <ul>
                <li><Link to={"/"}>Home</Link></li>
                <li><Link to={"/about"}>About</Link></li>
            </ul>
        </header>
    );
}

export default Header;
```

Ïù¥Îïå, **HeaderÎäî LinkÎ•º ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÏúºÎØÄÎ°ú Router ÏïàÏóê ÎÑ£Ïñ¥Ïïº ÌïúÎã§.** ÏôúÎÉêÌïòÎ©¥ Router Î∞ñÏóêÏÑúÎäî LinkÎ•º renderÌï† Ïàò ÏóÜÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§.

> Router.tsx

```typescript
import { BrowserRouter } from 'react-router-dom';
import Header from './components/Header';

function Router(){
    return (
        <BrowserRouter>
            <Header />
        </BrowserRouter>
    );
}

export default Router;
```

Ïù¥Ï†ú routesÎ•º ÏÉùÏÑ±Ìï† Ï∞®Î°ÄÏù¥Îã§.

```typescript
import { BrowserRouter, Route, Routes } from 'react-router-dom';
import Header from './components/Header';
import Home from './screens/Home';
import About from './screens/About';

function Router(){
    return (
        <BrowserRouter>
            <Header />
            <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/about" element={<About />} />
            </Routes>
        </BrowserRouter>
    );
}

export default Router;
```

Ïù¥Ï†ú Router ÌååÏùºÏùÑ Î∂àÎü¨Ïò§Î©¥ ÎêúÎã§.

> App.tsx

```typescript
import React from 'react';
import Router from './Router';

function App() {
  return (
    <div>
        <Router />
    </div>
  );
}

export default App;
```

## createBrowserRouter

`createBrowserRouter`Î•º ÏÑ†Ìò∏ÌïòÎäîÎç∞, ÏôúÎÉêÌïòÎ©¥ **Î∏åÎùºÏö∞Ï†ÄÎ•º Ï¢Ä Îçî ÏÑ†Ïñ∏Ï†ÅÏúºÎ°ú Î∞îÍøîÏ£ºÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§.**

> Router.tsx

```typescript
import { createBrowserRouter } from 'react-router-dom';
import Home from './screens/Home';
import About from './screens/About';
import Root from './Root';

const router = createBrowserRouter([
    {
        path: "/", // parent
        element: <Root />,
        children: [
            {
                path:"",
                element: <Home />
            },
            {
                path:"about",
                element: <About />
            },
        ]
    },

])
export default router;
```

> index.tsx

```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { RouterProvider } from 'react-router-dom';
import router from './Router';

const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);
root.render(
  <React.StrictMode>
    <RouterProvider router={router} />
  </React.StrictMode>
);
```

> Root.tsx (Ïù¥Ï†ÑÏùò App.tsx)

```typescript
import React from 'react';
// import Router from './Router';

function Root() {
  return (
    <div>
      Hello 
    </div>
  );
}

export default Root;
```

ÏúÑÏôÄ Í∞ôÏù¥ ÏûëÏÑ±ÌïòÍ≥† `/about`ÏúºÎ°ú Ï†ëÍ∑ºÌïòÎçîÎùºÎèÑ Ïó¨Ï†ÑÌûà `/`ÏôÄ Îß§ÏπòÍ∞Ä ÎêúÎã§. Ï¶â, Ïó¨Ï†ÑÌûà RootÎ•º renderÌïòÍ≥† ÏûàÎã§Îäî Í≤ÉÏù¥Îã§.

**Í∑∏ÎûòÏÑú `react-router-dom` ÏóêÍ≤å "Ïö∞Î¶¨Í∞Ä RootÏùò ÏûêÏãùÏùÑ renderÌïòÍ∏∏ ÏõêÌïúÎã§"Í≥† ÏïåÎ†§Ïïº ÌïúÎã§.**

Î∞©Î≤ïÏùÄ Îã§ÏùåÍ≥º Í∞ôÎã§.

> Root.tsx

```typescript
import React from 'react';
import { Outlet } from 'react-router-dom';

function Root() {
  return (
    <div>
      <Outlet /> 
    </div>
  );
}

export default Root;
```

Ïù¥Î†áÍ≤å ÌïòÎ©¥, `/about` ÌéòÏù¥ÏßÄÎ°ú Í∞ÄÎ©¥ react routerÍ∞Ä Ïù¥ `Root`Î•º Î≥¥Í≥† RootÎ•º renderÌïòÍ≥† react routerÎäî `Outlet`ÏùÑ `About`ÏúºÎ°ú ÎåÄÏ≤¥ÌïòÎ†§ ÌïúÎã§.

## errorElement

errorElementÏùÄ **Ïö∞Î¶¨Ïùò Ïª¥Ìè¨ÎÑåÌä∏Ïóê ÏóêÎü¨Í∞Ä Î∞úÏÉùÌï¥ÏÑú Ï∂©ÎèåÌïòÍ±∞ÎÇò Ïª¥Ìè¨ÎÑåÌä∏ ÏúÑÏπòÎ•º Ï∞®ÏßÄ Î™ªÌï† Îïå ÏÇ¨Ïö©ÌïúÎã§.**

> Router.tsx

```typescript
import { createBrowserRouter } from 'react-router-dom';
import Home from './screens/Home';
import About from './screens/About';
import Root from './Root';
import NotFound from './screens/NotFound';
import ErrorComponent from './components/ErrorComponent';

const router = createBrowserRouter([
    {
        path: "/", // parent
        element: <Root />,
        children: [
            {
                path:"",
                element: <Home />,
                errorElement: <ErrorComponent />
            },
            {
                path:"about",
                element: <About />
            },
        ],
        errorElement: <NotFound />, 
    },

])
export default router;
```

## useNavigate

useNavigateÎäî Ïù¥Ï†ÑÏóê Ïö∞Î¶¨Í∞Ä ÏÇ¨Ïö©Ìï¥Î¥§Îçò hookÏù¥Îã§. **useNavigateÎäî Ïú†Ï†ÄÎ•º Ïñ¥ÎîòÍ∞ÄÎ°ú Î≥¥ÎÇ¥Îäî Í∏∞Îä•Ïù¥ ÏûàÎã§. Ï¶â, Ïú†Ï†ÄÎ•º Ïù¥ÎèôÏãúÌÇ§Í≥† ÏúÑÏπòÎ•º Î∞îÍøîÏ§ÄÎã§.**

Î∞©Î≤ïÏùÄ 2Í∞ÄÏßÄÍ∞Ä ÏûàÎã§.

1. LinkÎ•º Ïù¥Ïö©ÌïúÎã§.
2. useNavigateÎ•º ÏÇ¨Ïö©ÌïúÎã§.

> Header.tsx

```typescript
import { Link, useNavigate } from 'react-router-dom';

function Header(){
    const navigate = useNavigate()
    const onAboutClick = () => {
        navigate("/about")
    }

    return (
        <header>
            <ul>
                <li>
                    <Link to={"/"}>Home</Link>
                </li>
                <li>
                    <button onClick={onAboutClick}>About</button>
                </li>
            </ul>
        </header>
    );
}

export default Header;
```

## useParams

ÏòàÏãúÎ•º ÏúÑÌï¥ Í∞ÑÎã®Ìïú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Î•º ÎßåÎì§Ïûê

> db.ts

```typescript
export const users = [
    {
      id: 1,
      name: "nico",
    },
    {
      id: 2,
      name: "lynn",
    },
  ];
```

> Home.tsx

```typescript
import { users } from '../db';
import { Link } from 'react-router-dom';

function Home(){
    
    return (
        <div> 
            <h1>Users</h1>
            <ul>
                {users.map((user) => ( 
                    <li key={user.id}>
                        <Link to={`/users/${user.id}`}>
                            {user.name}
                        </Link>
                    </li>
                ))}
            </ul>
        </div>
    );
}

export default Home;
```

> Router.tsx

ÌååÎùºÎØ∏ÌÑ∞Î•º ÎÑòÍ≤®Ï§Ñ Îïå `:`ÏúºÎ°ú ÎÑòÍ≤®Ï§ÄÎã§

```typescript
import { createBrowserRouter } from 'react-router-dom';
import Home from './screens/Home';
import About from './screens/About';
import Root from './Root';
import NotFound from './screens/NotFound';
import ErrorComponent from './components/ErrorComponent';
import User from './screens/users/User';

const router = createBrowserRouter([
    {
        path: "/", // parent
        element: <Root />,
        children: [
            {
                path:"",
                element: <Home />,
                errorElement: <ErrorComponent />
            },
            {
                path:"about",
                element: <About />
            },
            {
                path: "users/:userId",
                element: <User />
            }
        ],
        errorElement: <NotFound />, 
    },

])
export default router;
```

> User.tsx

UserÏóêÏÑú ÌååÎùºÎØ∏ÌÑ∞Î•º Í∫ºÎÇ¥Í∏∞ ÏúÑÌï¥ÏÑú `useParams`ÏùÑ ÏÇ¨Ïö©ÌïúÎã§.

```typescript
import { useParams } from 'react-router-dom';
import { users } from '../../db';

function User(){
    const {userId} = useParams();
    return <h1>User with it {userId} is named: {users[Number(userId)-1].name}</h1>;
}

export default User;
```

## Outlet 

OutletÏùÄ RouteÏùò ÏûêÏãùÎì§ÏùÑ render ÌïúÎã§.

> Router.tsx

user ÏïàÏóê Follower childrenÏùÑ Ï∂îÍ∞ÄÌïúÎã§.

```typescript
import Followers from './screens/users/Followers';

const router = createBrowserRouter([
    {
        path: "/", // parent
        element: <Root />,
        children: [
            ...
            {
                path: "users/:userId",
                element: <User />,
                children: [
                    {
                        path:"followers",
                        element:<Followers />
                    }
                ]
            }
        ],
        errorElement: <NotFound />, 
    },

])
export default router;
```

> User.tsx

OutletÏùÑ ÌÜµÌï¥ render Ìï¥Ï§ÄÎã§.

```typescript
import { useParams, Outlet, Link } from 'react-router-dom';
import { users } from '../../db';

function User(){
    const {userId} = useParams();
    return (
        <div>
            <h1>
                User with it {userId} is named: {users[Number(userId)-1].name}
            </h1>
            <hr />
            <Link to="followers">See Followers</Link>
            <Outlet /> 
        </div>

    );
}

export default User;
```

## useOutletContext

OutletÏóê `context`Î•º ÏÇ¨Ïö©Ìï¥ÏÑú ÏûêÏãùÏª¥Ìè¨ÎÑåÌä∏ÏóêÍ≤å Îç∞Ïù¥ÌÑ∞Î•º Ï†ÑÎã¨Ìï† Ïàò ÏûàÎã§.

> User.tsx

```typescript

function User(){
    const {userId} = useParams();
    return (
        <div>
            <h1>
                User with it {userId} is named: {users[Number(userId)-1].name}
            </h1>
            <hr />
            <Link to="followers">See Followers</Link>
            <Outlet 
                context={{
                    nameOfMyuser: users[Number(userId)-1].name,
                }}
            /> 
        </div>

    );
}
```

FollowersÎäî OutletÏóêÏÑú render ÎêúÎã§. **react routerÍ∞Ä ÎÇòÏùò route ÏÑ§Ï†ïÏùÑ ÏùΩÍ≥†ÏÑú OutletÏùÑ ÎÇòÏùò URLÍ≥º Îß§ÏπòÎêòÎäî ÏûêÏãùÏúºÎ°ú ÎåÄÏ≤¥ÏãúÌÇ¨ Í≤ÉÏù¥Îã§.**

Ïù¥Îïå, OutletÏùò contextÎ•º FollowersÍ∞Ä Î∞õÍ∏∞ ÏúÑÌï¥ÏÑú Îã§ÏùåÍ≥º Í∞ôÏù¥ ÏûëÏÑ±Ìï¥Ïïº ÌïúÎã§.

> Followers.tsx

```typescript
import { useOutletContext } from 'react-router-dom';

interface IFollowersContex {
    nameOfMyuser:string;
}

function Followers(){
    const {nameOfMyuser} = useOutletContext<IFollowersContex>();
    console.log(nameOfMyuser);
    return <h1>Here are Followers of {nameOfMyuser}</h1>
}

export default Followers;
```

## Extras

### useSearchParams

useSearchParams ÌõÖÏùÄ ÌòÑÏû¨ ÏúÑÏπòÏóê ÎåÄÌïú URLÏùò ÏøºÎ¶¨ Î¨∏ÏûêÏó¥ÏùÑ ÏùΩÍ≥† ÏàòÏ†ïÌïòÎäî Îç∞ ÏÇ¨Ïö©ÎêúÎã§. useState ÌõÖÍ≥º ÎßàÏ∞¨Í∞ÄÏßÄÎ°ú useSearchParamsÎäî ÌòÑÏû¨ ÏúÑÏπòÏùò search paramsÏôÄ Ïù¥Î•º ÏóÖÎç∞Ïù¥Ìä∏ÌïòÎäî Îç∞ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî Ìï®ÏàòÎùºÎäî Îëê Í∞ÄÏßÄ Í∞íÏùò Î∞∞Ïó¥ÏùÑ Î∞òÌôòÌïúÎã§.

setSearchParams Ìï®ÏàòÎäî ÌÉêÏÉâÍ≥º Í∞ôÏù¥ ÏûëÎèôÌïòÏßÄÎßå URLÏùò Í≤ÄÏÉâ Î∂ÄÎ∂ÑÏóê ÎåÄÌï¥ÏÑúÎßå ÏûëÎèôÌïúÎã§.

```typescript 
let [searchParams, setSearchParams] = useSearchParams();

setSearchParams(params);
```

```code
https://reactrouter.com/en/main/hooks/use-search-params?fav=yes&geo=123&something=true
```